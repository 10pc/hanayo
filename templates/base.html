{{ define "base" }}
{{/* or returns the first non-empty argument. So if KyutGrill is set, then return KyutGrill, else return default.jpg.
Or, in "if" terms: if .KyutGrill then .KyutGrill else "default.jpg". */}}
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">		

		<title>{{ if .TitleBar }}{{ .TitleBar }} - {{ end }}Ripple</title>
		
		<link rel="stylesheet" type="text/css" href="/static/semantic.min.css?{{ unixNano }}">
		<link rel="stylesheet" type="text/css" href="/static/ripple.css?{{ unixNano }}">
	</head>
	<body>
		{{/* 
			If we're asked to disable the hugeheading, but a KyutGrill is set, it will become the background of the page.
			This is mainly used in user profiles, allowing users to set their profile background.
			If we're asked to disable the hugeheading, and a KyutGrill is not set, navbar has the `dropped` class.
		*/}}
		<div class="ui full height main wrapper"{{ if and .DisableHH .KyutGrill }} style="background-image: url('/static/headers/{{ .KyutGrill }}');"{{ end }}>
			{{ template "navbar" . }}
			{{ if not .DisableHH }}
				<div class="huge heading {{ and .HeadingOnRight "right" }} dropped"
					style="background-image: url('/static/headers/{{ or .KyutGrill "default.jpg" }}');">
					<h1>{{ if .HeadingTitle }}{{ html .HeadingTitle }}{{ else }}{{ .TitleBar }}{{ end }}</h1>
				</div>
			{{ end }}
		
			<div class="h-container">
				<div class="ui margined container" id="messages-container">
				<noscript>Research has proven this website works 10000% better if you have JavaScript enabled.</noscript>
				{{ if .Messages }}
						{{ range $i, $v := .Messages }}
							<div class="ui {{ $v.Type }} message">
								<i class="close icon"></i>
								{{ $v.Content }}
							</div>
						{{ end }}
				{{ end }}
				{{ if and .Context.User.Username (not (has .Context.User.Privileges 1)) }}
					<div class="ui warning message">
						Your account is currently in restricted mode. You will
						not be able to do certain actions, and your profile
						can only be seen by you and by Ripple's staff.
						If you believe we have mistaken putting you in
						restricted mode, or a month has passed since you first
						saw this, then you can send an appeal at
						<a href="mailto:support@ripple.moe">support@ripple.moe</a>.
					</div>
				{{ end }}
				</div>
				{{ template "tpl" . }}
			</div>
	
		</div>
	
		<div class="footer">
			Â© 2015-{{ curryear }} Ripple. 
			<a href="/team" title="Who's working on this thing?"><i class="users icon"></i>Team</a> | 
			<a href="/dev" title="59 6f 75 27 72 65 20 73 6f 20 31 33 33 37 2e"><i class="wrench icon"></i>Developers</a> | 
			<a href="/changelog" title="See what's changed!"><i class="bug icon"></i>Changelog</a> | 
			<a href="https://git.zxq.co/ripple" title="What's going on under the hood?"><i class="git square icon"></i></a>
			<a href="https://twitter.com/_ripple" title="Follow us on twitter!"><i class="twitter icon"></i></a>
			<a href="https://reddit.com/r/osuripple" title="Share irrelevant opinions on reddit!"><i class="reddit square icon"></i></a>
		</div>
		{{ $conf := .Conf }}
		<script src="{{ if $conf.Offline }}/static/{{ else }}https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-rc1/{{ end }}jquery.min.js?{{ unixNano }}"></script>
		<script src="{{ if $conf.Offline }}/static/{{ else }}https://cdnjs.cloudflare.com/ajax/libs/jquery-timeago/1.5.3/{{ end }}jquery.timeago.min.js?{{ unixNano }}"></script>
		<script src="//twemoji.maxcdn.com/2/twemoji.min.js?2.2"></script>
		<script src="/static/semantic.min.js?{{ unixNano }}"></script>
		<script>
			var hanayoConf = {
				avatars: {{ .Conf.AvatarURL }}
			};
		</script>
		<script src="/static/ripple.js?{{ unixNano }}"></script>
		{{/* If we got some more scripts to print, print'em */}}
		{{ if .Scripts }}
			{{ range .Scripts }}
				<script src="{{ . }}?{{ unixNano }}"></script>
			{{ end }}
		{{ end }}
	</body>
</html>
{{ end }}
